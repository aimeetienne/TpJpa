/*C5*/SET SCHEMA PUBLIC
alter table Personne_Amis drop constraint FKF5EBF2E9AA67C827
alter table Personne_Amis drop constraint FKF5EBF2E963D97076
drop table Amis if exists
drop table Equipements if exists
drop table Maison if exists
drop table Maison_Equipements if exists
drop table Personne if exists
drop table Personne_Amis if exists
create table Amis (id_amis bigint generated by default as identity (start with 1), Nom varchar(255), prenom varchar(255), id_personne_id_per bigint, primary key (id_amis))
create table Equipements (id bigint generated by default as identity (start with 1), libelle varchar(255), primary key (id))
create table Maison (id bigint generated by default as identity (start with 1), adresse varchar(255), ip_adresse varchar(255), nb_chauffage integer not null, nb_pieces integer not null, superficie integer not null, primary key (id))
create table Maison_Equipements (Maison_id bigint not null, equip_id bigint not null, unique (equip_id))
create table Personne (id_per bigint generated by default as identity (start with 1), Nom varchar(255), Prenom varchar(255), date_naiss timestamp, genre integer, mail varchar(255), profil varchar(255), primary key (id_per))
create table Personne_Amis (Personne_id_per bigint not null, amis_id_amis bigint not null, unique (amis_id_amis))
alter table Amis add constraint FK1F327681B99503 foreign key (id_personne_id_per) references Personne
alter table Maison_Equipements add constraint FK4FAAC9EBA6E6E5B foreign key (equip_id) references Equipements
alter table Maison_Equipements add constraint FK4FAAC9E5BA4F8E9 foreign key (Maison_id) references Maison
alter table Personne_Amis add constraint FKF5EBF2E9AA67C827 foreign key (Personne_id_per) references Personne
alter table Personne_Amis add constraint FKF5EBF2E963D97076 foreign key (amis_id_amis) references Amis
INSERT INTO PERSONNE VALUES(1,'Martin','Fanny','2014-02-05 14:44:27.610000',1,'etienne.lome@gmai.com',NULL)
INSERT INTO AMIS VALUES(1,'demars','Fran\u00e7ois',NULL)
INSERT INTO AMIS VALUES(2,'Etienne','Boudet',NULL)
INSERT INTO MAISON VALUES(1,'52 E Rue papu','192.92.0.0',12,12,12)
INSERT INTO PERSONNE_AMIS VALUES(1,1)
INSERT INTO PERSONNE_AMIS VALUES(1,2)
COMMIT
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
alter table Amis drop constraint FK1F327681B99503
alter table Maison_Equipements drop constraint FK4FAAC9EBA6E6E5B
alter table Maison_Equipements drop constraint FK4FAAC9E5BA4F8E9
alter table Personne_Amis drop constraint FKF5EBF2E9AA67C827
alter table Personne_Amis drop constraint FKF5EBF2E963D97076
drop table Amis if exists
drop table Equipements if exists
drop table Maison if exists
drop table Maison_Equipements if exists
drop table Personne if exists
drop table Personne_Amis if exists
create table Amis (id_amis bigint generated by default as identity (start with 1), Nom varchar(255), prenom varchar(255), id_personne_id_per bigint, primary key (id_amis))
create table Equipements (id bigint generated by default as identity (start with 1), libelle varchar(255), equip_id bigint, primary key (id))
create table Maison (id bigint generated by default as identity (start with 1), adresse varchar(255), ip_adresse varchar(255), nb_chauffage integer not null, nb_pieces integer not null, superficie integer not null, primary key (id))
create table Maison_Equipements (Maison_id bigint not null, equip_id bigint not null, unique (equip_id))
create table Personne (id_per bigint generated by default as identity (start with 1), Nom varchar(255), Prenom varchar(255), date_naiss timestamp, genre integer, mail varchar(255), profil varchar(255), primary key (id_per))
create table Personne_Amis (Personne_id_per bigint not null, amis_id_amis bigint not null, unique (amis_id_amis))
alter table Amis add constraint FK1F327681B99503 foreign key (id_personne_id_per) references Personne
alter table Equipements add constraint FK2BF439A0BA6E6E5B foreign key (equip_id) references Equipements
alter table Maison_Equipements add constraint FK4FAAC9EBA6E6E5B foreign key (equip_id) references Equipements
alter table Maison_Equipements add constraint FK4FAAC9E5BA4F8E9 foreign key (Maison_id) references Maison
alter table Personne_Amis add constraint FKF5EBF2E9AA67C827 foreign key (Personne_id_per) references Personne
alter table Personne_Amis add constraint FKF5EBF2E963D97076 foreign key (amis_id_amis) references Amis
INSERT INTO PERSONNE VALUES(1,'Martin','Fanny','2014-02-05 14:51:25.546000',1,'etienne.lome@gmai.com',NULL)
INSERT INTO AMIS VALUES(1,'demars','Fran\u00e7ois',NULL)
INSERT INTO AMIS VALUES(2,'Etienne','Boudet',NULL)
INSERT INTO MAISON VALUES(1,'52 E Rue papu','192.92.0.0',12,12,12)
INSERT INTO EQUIPEMENTS VALUES(1,'Radio',NULL)
INSERT INTO PERSONNE_AMIS VALUES(1,1)
INSERT INTO PERSONNE_AMIS VALUES(1,2)
INSERT INTO MAISON_EQUIPEMENTS VALUES(1,1)
COMMIT
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
DISCONNECT
